<br />
<div align="center">
  <img src="https://static.sismo.io/readme/top-main.png" alt="Logo" width="150" height="150" style="borderRadius: 20px">

  <h3 align="center">
    zkConnect
  </h3>

  <p align="center">
    Made by <a href="https://docs.sismo.io/" target="_blank">Sismo</a>
  </p>
  
  <p align="center">
    <a href="https://discord.gg/sismo" target="_blank">
        <img src="https://img.shields.io/badge/Discord-7289DA?style=for-the-badge&logo=discord&logoColor=white"/>
    </a>
    <a href="https://twitter.com/sismo_eth" target="_blank">
        <img src="https://img.shields.io/badge/Twitter-1DA1F2?style=for-the-badge&logo=twitter&logoColor=white"/>
    </a>
  </p>
</div>

zkConnect is a privacy-preserving single sign-on method for applications. Once integrated, applications can request private, granular data from users, while users can authenticate and selectively reveal their data thanks to zero-knowledge proofs (ZKPs). 

zkConnect features two packages: 
- [`@sismo-core/zk-connect-client`](./packages/zk-connect-client): the frontend package to easily request ZKPs from users of Sismo in a privacy-preserving manner (the prover).
- [`@sismo-core/zk-connect-server`](./packages/zk-connect-server): the backend package to easily verify these ZKPs (the verifier).

In order to use zkConnect, you will need to have an `appId` registered in the Sismo Factory. You can register your appId [here](https://factory.sismo.io/apps-explorer).

You can see this guide for a full example of how to integrate zkConnect in your application: [zkConnect Guide](https://zk-connect-guide.sismo.io/).

## Frontend
### Installation

```bash
# with npm
npm install @sismo-core/zk-connect-client

# with yarn
yarn add @sismo-core/zk-connect-client
```

### Usage

Create a new instance of the zkConnect client:

```typescript
import { ZKConnect } from '@sismo-core/zk-connect-client'

const zkConnect = new ZkConnect({
  appId: "your-app-id",
});
```

Request a ZKP from the user:
```typescript
// Request a ZKP that the user has a Data Vault in Sismo
// the user will be redirected to Sismo to create the proof from his Data Vault
// After his proof is generated, he is redirect with it to your app 
await zkConnect.request({});
```

Request a ZKP from the user with respect to a specific groupId: 
```typescript
import { DataRequest } from '@sismo-core/zk-connect-client';
// Request a ZKP that the user has a Data Vault in Sismo 
// and he is part of the group with id "0xc31bc3e01e3ad936325895c5a6f8d6ff"
// the user will be redirected to Sismo Vault App to create the proof from his Data Vault
await zkConnect.request({
  dataRequest: new DataRequest({
    groupId: "your-group-id",
  }),
});
```

*To see all already created groups, you can go to the [Sismo Factory](https://factory.sismo.io/apps-explorer), you will also be able to create new groups that suit your needs.*

Receive the `ZkConnectResponse` object containing the ZKP from the user when he is redirected back to your application. This is the `ZkConnectResponse` object that you will send to your backend to verify the ZKP. 
```typescript
// The `getResponse` function returns the proof generated by your user after coming back from Sismo Vault app.
const zkConnectResponse = zkConnect.getResponse();
```

## Backend
### Installation

```bash
# with npm
npm install @sismo-core/zk-connect-server

# with yarn
yarn add @sismo-core/zk-connect-server
```

### Usage

Create a new instance of the zkConnect server:

```typescript
import { ZKConnect } from '@sismo-core/zk-connect-server'

const zkConnect = new ZkConnect({
  appId: "<your-app-id>",
});
```

Verify the ZKP received from the user. This should be done if you don't care about the group that the user is part of and you just want to verify that the user has a Data Vault in Sismo.
```typescript
const zkConnectResponse = zkConnect.verify({
  // it contains the ZKP from the user
  zkConnectResponse: zkConnectResponse,
});
```

Verify the ZKP received from the user with respect to a specific groupId. It is important to verify with the dataRequest that the proof is valid for the group that you want to verify, otherwise anyone can create a valid proof for any group.
```typescript
const zkConnectResponse = zkConnect.verify({
  // it contains the ZKP from the user
  zkConnectResponse: zkConnectResponse,
  // The groupId that the user should be part of
  dataRequest: new DataRequest({
    groupId: "0xc31bc3e01e3ad936325895c5a6f8d6ff",
  }),
});
```

## License

Distributed under the MIT License.

## Contribute

Please, feel free to open issues, PRs or simply provide feedback!

## Contact

Prefer [Discord](https://discord.gg/sismo) or [Twitter](https://twitter.com/sismo_eth)

<br/>
<img src="https://static.sismo.io/readme/bottom-main.png" alt="bottom" width="100%" >
